(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{50:function(e,n,t){"use strict";t.r(n);var r=t(2),o=t(19),c=t.n(o),a=t(4),i=t(0),u=function(e){var n=e.changeHandler;return Object(i.jsxs)("div",{style:{padding:10},children:["Filter shown with ",Object(i.jsx)("input",{onChange:n})]})},d=function(e){var n=e.name,t=e.nameHandler,r=e.number,o=e.numberHandler,c=e.submitHandler;return Object(i.jsxs)("form",{style:{margin:10,padding:10,border:"solid black 2px"},children:[Object(i.jsx)("h2",{children:"Add/Update a number"}),Object(i.jsxs)("p",{children:["Name: ",Object(i.jsx)("input",{value:n,onChange:t})]}),Object(i.jsxs)("p",{children:["Number: ",Object(i.jsx)("input",{value:r,onChange:o})]}),Object(i.jsx)("button",{type:"submit",onClick:c,children:"ADD"})]})},l=function(e){var n=e.persons,t=e.clickHandler;return Object(i.jsx)("div",{style:{display:"flex",flexDirection:"column",border:"solid black 2px"},children:n.map((function(e){return Object(i.jsxs)("div",{style:{display:"grid",border:"solid black 1px",padding:10},children:["  NAME : ",e.name," ",Object(i.jsx)("br",{})," NUMBER : ",e.number,Object(i.jsx)("button",{style:{backgroundColor:"darkred"},value:e.id,onClick:function(){return t(e.id)},children:" DELETE "})]},e.id)}))})},s=t(5),b=t.n(s),f="/api/persons",j={getAll:function(){return b.a.get(f).then((function(e){return e.data}))},add:function(e){return b.a.post(f,e).then((function(e){return e.data}))},del:function(e){return b.a.delete("".concat(f,"/").concat(e)).then()},update:function(e){return console.log("update"),b.a.put("".concat(f,"/").concat(e.id),e).then((function(e){return e.data}))}},m=function(e){var n=e.message;return null===n?null:n.includes("ERROR:")?Object(i.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n}):Object(i.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},h=function(){Object(r.useEffect)((function(){j.getAll().then((function(e){console.log("Got the persons data"),o(e),k(e)}))}),[]);var e=Object(r.useState)([]),n=Object(a.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(""),s=Object(a.a)(c,2),b=s[0],f=s[1],h=Object(r.useState)(""),p=Object(a.a)(h,2),g=p[0],O=p[1],x=Object(r.useState)([]),v=Object(a.a)(x,2),y=v[0],k=v[1],w=Object(r.useState)(null),R=Object(a.a)(w,2),S=R[0],E=R[1];return Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:10},children:[Object(i.jsx)("h2",{style:{alignSelf:"center",fontSize:"2rem"},children:"Phonebook"}),Object(i.jsx)(m,{message:S}),Object(i.jsx)(u,{changeHandler:function(e){k(t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())}))),""===e.target.value&&k(t)}}),Object(i.jsx)(d,{name:b,nameHandler:function(e){return f(e.target.value)},number:g,numberHandler:function(e){return O(e.target.value)},submitHandler:function(e){if(e.preventDefault(),void 0!==t.find((function(e){return e.name===b}))){var n=t.find((function(e){return e.name===b}));return n.number=g,void(window.confirm("".concat(n.name," is already added on the phonebook, replace the old number with the new one?"))&&j.update(n).then((function(e){E("Person ".concat(e.name," was correctly updated")),o(t.map((function(n){return n.id!==e.id?n:e}))),k(t.map((function(n){return n.id!==e.id?n:e}))),f(""),O(""),setTimeout((function(){E(null)}),5e3)})).catch((function(e){E("ERROR: Information of ".concat(n.name," has already been removed from server")),o(t.filter((function(e){return e.id!==n.id}))),k(t.filter((function(e){return e.id!==n.id}))),f(""),O(""),setTimeout((function(){E(null)}),5e3)})))}var r={name:b,number:g};j.add(r).then((function(e){E("Added the person ".concat(e.name," correctly")),o(t.concat(e)),k(t.concat(e)),f(""),O(""),setTimeout((function(){E(null)}),5e3)})).catch((function(e){console.log(e.response.data),E("ERROR: ".concat(e.response.data.error)),f(""),O(""),setTimeout((function(){E(null)}),5e3)}))}}),Object(i.jsx)("h2",{style:{fontSize:"2rem"},children:"Numbers"}),Object(i.jsx)(l,{persons:y,clickHandler:function(e){window.confirm("Are you sure you want to delete this number?")&&j.del(e).then((function(){var n=t.filter((function(n){return n.id!==e}));o(n),k(n),console.log("La persona con el id:".concat(e," a sido eliminada de la base de datos"))}))}})]})};c.a.createRoot(document.getElementById("root")).render(Object(i.jsx)(h,{}))}},[[50,1,2]]]);
//# sourceMappingURL=main.b6ce7f14.chunk.js.map